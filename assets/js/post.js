function addBlankTargetForLinks(){$('.md-preview a[href^="http"]').each(function(){$(this).attr("target","_blank")})}function showFullScreenImg(e){$("#show_image_layer,#img_wrapper").removeClass("hidden");var t=$(e.target).attr("src");$("#img_wrapper img").attr("src",t),$("body").css("overflow","hidden")}function exitFullScreen(){$("#show_image_layer").hasClass("hidden")||($("#show_image_layer,#img_wrapper").addClass("hidden"),$("#img_wrapper img").attr("src",""),$("body").removeAttr("style"))}function copyCode(e){var t=$(e).nextAll("code").text();clipboard.copy(t).then(function(){$(e).text("已复制"),$(e).attr("title","代码已成功复制").tooltip("fixTitle").tooltip("show")})}function showSlide(e){$(e.currentTarget).addClass("hidden"),$(".navbar-side").css("right",0),$(".article-left").addClass("has-side"),$(".close-slide-btn").removeClass("hidden"),$("#toc").toc({selectors:"h1,h2,h3",container:".md-preview",prefix:"toc",highlightOffset:1,anchorName:function(e,t,o){return o+e}})}function hideSlide(e){$(e.currentTarget).addClass("hidden"),$(".navbar-side").css("right","-265px"),setTimeout(function(){$(".article-left").removeClass("has-side"),$(".toggle-side-btn ").removeClass("hidden")},200)}function setTocPosition(){var e=$(".md-preview").offset().top+$(".md-preview").outerHeight()-$("#toc").outerHeight(),t=$(window).scrollTop(),o=$("header").outerHeight();t<=o?$(".toc-wrapper,.toggle-side-btn").removeClass("position-fixed").addClass("position-absolute").removeAttr("style"):t>o&&t<=e?($(".toc-wrapper,.toggle-side-btn").removeAttr("style"),setTimeout(function(){$(".toc-wrapper,.toggle-side-btn").removeClass("position-absolute").addClass("position-fixed")},10)):($(".toc-wrapper,.toggle-side-btn").removeClass("position-fixed").addClass("position-absolute"),$(".toc-wrapper").css("top",e-$(".md-preview").offset().top),$(".toggle-side-btn").css("top",e))}$(document).keydown(function(e){if(27==(e=e||event).keyCode)return exitFullScreen(),!1}),$(function(){hljs.initHighlightingOnLoad(),$(".md-preview h1,.md-preview h2,.md-preview h3").length>0&&$(".toggle-side-btn").removeClass("hidden"),$(".toggle-side-btn").click(function(e){showSlide(e),setTimeout(function(){setTocPosition()},10)}),$(".close-slide-btn").click(function(e){hideSlide(e)}),$(window).scroll(function(){setTocPosition()}),$(window).scroll(function(){$(window).scrollTop()>=300?$("#back_to_top").fadeIn(300):$("#back_to_top").fadeOut(300)}),$("#back_to_top").click(function(){return $("html,body").animate({scrollTop:"0px"},600),!1}),$(".md-preview img").click(function(e){showFullScreenImg(e)}),$("#img_wrapper").click(function(){exitFullScreen()}),$(document).bind("DOMNodeInserted",function(){addBlankTargetForLinks()}),$(".md-preview pre").hover(function(){if($(this).children(".copy-code-wrapper").length<=0){$("<a data-toggle='tooltip' data-placement='right' title='点击复制代码' class='copy-code-wrapper' onclick='copyCode(this);'>复制</a>").prependTo($(this));var e=$(this).offset().top,t=$(this).offset().left+$(this).outerWidth()-$(this).children(".copy-code-wrapper").outerWidth();$(this).children(".copy-code-wrapper").offset({top:e,left:t}),$(this).children(".copy-code-wrapper").tooltip()}},function(){$(this).children(".copy-code-wrapper").remove()})});