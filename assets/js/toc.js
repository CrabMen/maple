!function(l){l.fn.smoothScroller=function(e){e=l.extend({},l.fn.smoothScroller.defaults,e);var t=l(this);return l(e.scrollEl).animate({scrollTop:t.offset().top-l(e.scrollEl).offset().top-e.offset},e.speed,e.ease,function(){var e=t.attr("id");e.length&&(history.pushState?history.pushState(null,null,"#"+e):document.location.hash=e),t.trigger("smoothScrollerComplete")}),this},l.fn.smoothScroller.defaults={speed:400,ease:"swing",scrollEl:"body,html",offset:0},l("body").on("click","[data-smoothscroller]",function(e){e.preventDefault();var t=l(this).attr("href");0===t.indexOf("#")&&l(t).smoothScroller()})}(jQuery),function(g){var n={};g.fn.toc=function(e){var t,f,u=this,v=g.extend({},jQuery.fn.toc.defaults,e),l=g(v.container),o=g(v.selectors,l),p=[],m=v.activeClass,c=function(e){t&&clearTimeout(t),t=setTimeout(function(){if(0!=g("li",u).length){var e,t,l=g(window).scrollTop(),o=(Number.MAX_VALUE,0);if(t=f<l?"down":"up",(f=l)<p[0])o=0;else if(l>=p[p.length-1])o=p.length-1;else for(var r=0,n=p.length;r<n;r++)if(l<p[r]){o=r-1;break}g("li",u).removeClass(m),e=g("li:eq("+o+")",u).addClass(m).removeClass("hidden");var a=g(".toc-active")[0].className.split(" ")[0],s=a.charAt(a.length-1),i=g(".toc-active").nextAll(),c=g(".toc-active").prevAll();if("down"==t){var h=g(".toc-active").prevAll(".toc-h"+(parseInt(s)+1));g(h).addClass("hidden"),g.each(i,function(e,t){var l=t.className.split(" ")[0],o=l.charAt(l.length-1);return!(o<s)&&(o==s?(g(t).removeClass("hidden"),!0):void 0)}),g.each(c,function(e,t){var l=t.className.split(" ")[0],o=l.charAt(l.length-1);return o<s?(g(t).prevAll(".toc-h"+parseInt(s)).addClass("hidden"),g(t).removeClass("hidden"),!1):o==s?(g(t).removeClass("hidden"),!0):void 0}),g("li:eq(0)",u).removeClass("hidden")}else{var d=g(".toc-active").nextAll(".toc-h"+(parseInt(s)+1));g(d).addClass("hidden"),g.each(c,function(e,t){var l=t.className.split(" ")[0],o=l.charAt(l.length-1);return o<s?(g(t).removeClass("hidden"),!1):o==s?(g(t).removeClass("hidden"),!0):void 0}),g.each(i,function(e,t){var l=t.className.split(" ")[0],o=l.charAt(l.length-1);return o<s?(g(t).nextAll(".toc-h"+parseInt(s)).addClass("hidden"),!1):o==s?(g(t).removeClass("hidden"),!0):void 0})}v.onHighlight(e)}},50)};if(v.highlightOnScroll&&(g(window).bind("scroll",c),c()),0!=o.length){var h=parseInt(o[0].localName.replace("h",""));return this.each(function(){var s=g(this),i=g(v.listType);o.each(function(e,t){var l=g(t);p.push(l.offset().top-v.highlightOffset);var o=v.anchorName(e,t,v.prefix),r=parseInt(t.localName.replace("h",""));if(t.id!==o)g("<span/>").attr("id",o).insertBefore(l);var n=g("<a/>").text(v.headerText(e,t,l)).attr("href","#"+o).bind("click",function(e){g(window).unbind("scroll",c),function(e,t){if(v.smoothScrolling&&"function"==typeof v.smoothScrolling){e.preventDefault();var l=g(e.target).attr("href");v.smoothScrolling(l,v,t)}g("li",u).removeClass(m),g(e.target).parent().addClass(m)}(e,function(){g(window).bind("scroll",c)}),s.trigger("selected",g(this).attr("href"))}),a=g("<li/>").addClass(v.itemClass(e,t,l,v.prefix)).append(n);h<r?a.addClass("hidden"):h=r,i.append(a)}),s.html(i)})}},jQuery.fn.toc.defaults={container:"body",listType:"<ul/>",selectors:"h1,h2,h3",smoothScrolling:function(e,t,l){g(e).smoothScroller({offset:t.scrollToOffset}).on("smoothScrollerComplete",function(){l()})},scrollToOffset:0,prefix:"toc",activeClass:"toc-active",onHighlight:function(){},highlightOnScroll:!0,highlightOffset:100,anchorName:function(e,t,l){if(t.id.length)return t.id;var o=g(t).text().replace(/[^a-z0-9]/gi," ").replace(/\s+/g,"-").toLowerCase();if(n[o]){for(var r=2;n[o+r];)r++;o=o+"-"+r}return n[o]=!0,l+"-"+o},headerText:function(e,t,l){return l.text()},itemClass:function(e,t,l,o){return o+"-"+l[0].tagName.toLowerCase()}}}(jQuery);