!function(e){e.fn.smoothScroller=function(t){t=e.extend({},e.fn.smoothScroller.defaults,t);var l=e(this);return e(t.scrollEl).animate({scrollTop:l.offset().top-e(t.scrollEl).offset().top-t.offset},t.speed,t.ease,function(){var e=l.attr("id");e.length&&(history.pushState?history.pushState(null,null,"#"+e):document.location.hash=e),l.trigger("smoothScrollerComplete")}),this},e.fn.smoothScroller.defaults={speed:400,ease:"swing",scrollEl:"body,html",offset:0},e("body").on("click","[data-smoothscroller]",function(t){t.preventDefault();var l=e(this).attr("href");0===l.indexOf("#")&&e(l).smoothScroller()})}(jQuery),function(e){var t={};e.fn.toc=function(t){var l,o,r=this,n=e.extend({},jQuery.fn.toc.defaults,t),a=e(n.container),s=e(n.selectors,a),i=[],c=n.activeClass,h=function(t,l){if(n.smoothScrolling&&"function"==typeof n.smoothScrolling){t.preventDefault();var o=e(t.target).attr("href");n.smoothScrolling(o,n,l)}e("li",r).removeClass(c),e(t.target).parent().addClass(c)},d=function(t){l&&clearTimeout(l),l=setTimeout(function(){if(0!=e("li",r).length){var t,l,a=e(window).scrollTop(),s=(Number.MAX_VALUE,0);if(l=a>o?"down":"up",o=a,a<i[0])s=0;else if(a>=i[i.length-1])s=i.length-1;else for(var h=0,d=i.length;h<d;h++)if(a<i[h]){s=h-1;break}e("li",r).removeClass(c),t=e("li:eq("+s+")",r).addClass(c).removeClass("hidden");var f=e(".toc-active")[0].className.split(" ")[0],u=f.charAt(f.length-1),v=e(".toc-active").nextAll(),p=e(".toc-active").prevAll();if("down"==l){var m=e(".toc-active").prevAll(".toc-h"+(parseInt(u)+1));e(m).addClass("hidden"),e.each(v,function(t,l){var o=l.className.split(" ")[0],r=o.charAt(o.length-1);return!(r<u)&&(r==u?(e(l).removeClass("hidden"),!0):void 0)}),e.each(p,function(t,l){var o=l.className.split(" ")[0],r=o.charAt(o.length-1);return r<u?(e(l).prevAll(".toc-h"+parseInt(u)).addClass("hidden"),e(l).removeClass("hidden"),!1):r==u?(e(l).removeClass("hidden"),!0):void 0}),e("li:eq(0)",r).removeClass("hidden")}else{var g=e(".toc-active").nextAll(".toc-h"+(parseInt(u)+1));e(g).addClass("hidden"),e.each(p,function(t,l){var o=l.className.split(" ")[0],r=o.charAt(o.length-1);return r<u?(e(l).removeClass("hidden"),!1):r==u?(e(l).removeClass("hidden"),!0):void 0}),e.each(v,function(t,l){var o=l.className.split(" ")[0],r=o.charAt(o.length-1);return r<u?(e(l).nextAll(".toc-h"+parseInt(u)).addClass("hidden"),!1):r==u?(e(l).removeClass("hidden"),!0):void 0})}n.onHighlight(t)}},50)};if(n.highlightOnScroll&&(e(window).bind("scroll",d),d()),0!=s.length){var f=parseInt(s[0].localName.replace("h",""));return this.each(function(){var t=e(this),l=e(n.listType);s.each(function(o,r){var a=e(r);i.push(a.offset().top-n.highlightOffset);var s=n.anchorName(o,r,n.prefix),c=parseInt(r.localName.replace("h",""));if(r.id!==s)e("<span/>").attr("id",s).insertBefore(a);var u=e("<a/>").text(n.headerText(o,r,a)).attr("href","#"+s).bind("click",function(l){e(window).unbind("scroll",d),h(l,function(){e(window).bind("scroll",d)}),t.trigger("selected",e(this).attr("href"))}),v=e("<li/>").addClass(n.itemClass(o,r,a,n.prefix)).append(u);c>f?v.addClass("hidden"):f=c,l.append(v)}),t.html(l)})}},jQuery.fn.toc.defaults={container:"body",listType:"<ul/>",selectors:"h1,h2,h3",smoothScrolling:function(t,l,o){e(t).smoothScroller({offset:l.scrollToOffset}).on("smoothScrollerComplete",function(){o()})},scrollToOffset:0,prefix:"toc",activeClass:"toc-active",onHighlight:function(){},highlightOnScroll:!0,highlightOffset:100,anchorName:function(l,o,r){if(o.id.length)return o.id;var n=e(o).text().replace(/[^a-z0-9]/gi," ").replace(/\s+/g,"-").toLowerCase();if(t[n]){for(var a=2;t[n+a];)a++;n=n+"-"+a}return t[n]=!0,r+"-"+n},headerText:function(e,t,l){return l.text()},itemClass:function(e,t,l,o){return o+"-"+l[0].tagName.toLowerCase()}}}(jQuery);